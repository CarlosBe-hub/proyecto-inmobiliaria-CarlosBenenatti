@model IEnumerable<ProyectoInmobiliaria.Models.Pago>
@{
    ViewData["Title"] = "Pagos";
    var idContrato = ViewBag.IdContrato;
}

<h2 class="mb-4">Pagos del Contrato @idContrato</h2>

<div class="mb-3">
    <a asp-action="Create" asp-route-idContrato="@idContrato" class="btn btn-primary">
        <i class="bi bi-plus-circle"></i> Nuevo Pago
    </a>
    <a asp-controller="Contrato" asp-action="Index" class="btn btn-secondary">
        <i class="bi bi-arrow-left-circle"></i> ← Volver a Contratos
    </a>
</div>

<table class="table table-hover table-bordered align-middle">
    <thead class="table-dark">
        <tr>
            <th>N° Pago</th>
            <th>Fecha</th>
            <th>Monto</th>
            <th>Método</th>
            <th>Detalle</th>
            <th class="text-center">Acciones</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var item in Model)
    {
        <tr>
            <td>@item.NumeroPago</td>
            <td>@item.FechaPago.ToString("dd/MM/yyyy")</td>
            <td>@item.Monto.ToString("C")</td>
            <td>@item.MetodoPago</td>
            <td>@item.Detalle</td>
            <td class="text-center">
                <a asp-action="Details" asp-route-id="@item.IdPago" class="btn btn-info btn-sm text-white">
                    <i class="bi bi-eye"></i> Detalle
                </a>
                <a asp-action="Edit" asp-route-id="@item.IdPago" class="btn btn-warning btn-sm text-dark">
                    <i class="bi bi-pencil-square"></i> Editar
                </a>
                <a asp-action="Anular" asp-route-id="@item.IdPago" class="btn btn-danger btn-sm">
                    <i class="bi bi-x-circle"></i> Anular
                </a>
            </td>
        </tr>
    }
    </tbody>
</table>
